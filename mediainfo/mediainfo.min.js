!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).MediaInfo=e()}(this,function(){"use strict";function a(){}var Pe,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=(Pe="undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("mediainfo.js",document.baseURI).href,async function(U){var W,i,t,k,x,H,e,a,u,y=U||{},U=((y=void 0!==y?y:{}).ready=new Promise(function(t,e){W=t,i=e}),y.locateFile=function(t,e){return t.endsWith(".wasm")?"https://userscript.kysdm.com/wasm/"+t:e+t},Object.assign({},y)),z="./this.program",L="object"==typeof window,s="function"==typeof importScripts,Y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,n="",c=(Y?(t=(await import("module"))["createRequire"],t=t("undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("mediainfo.js",document.baseURI).href),k=t("fs"),x=t("path"),n=s?x.dirname(n)+"/":t("url").fileURLToPath(new URL("./","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("mediainfo.js",document.baseURI).href)),H=(t,e)=>(t=t.startsWith("file://")?new URL(t):x.normalize(t),k.readFileSync(t,e?void 0:"utf8")),e=t=>{t=H(t,!0);return t=t.buffer?t:new Uint8Array(t)},1<process.argv.length&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(t){throw t}),process.on("unhandledRejection",function(t){throw t}),y.inspect=function(){return"[Emscripten Module object]"}):(L||s)&&(s?n=self.location.href:"undefined"!=typeof document&&document.currentScript&&(n=document.currentScript.src),n=0!==(n=Pe?Pe:n).indexOf("blob:")?n.substr(0,n.replace(/[?#].*/,"").lastIndexOf("/")+1):"",H=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},s)&&(e=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),y.print||console.log.bind(console),y.printErr||console.warn.bind(console)),B=(Object.assign(y,U),y.arguments&&y.arguments,y.thisProgram&&(z=y.thisProgram),y.quit&&y.quit,y.wasmBinary&&(a=y.wasmBinary),y.noExitRuntime,"object"!=typeof WebAssembly&&g("no native wasm support detected"),!1);var v,f,l,p,w,d,V,G,N,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function J(t,e){if(t){for(var n=f,r=t,o=r+e,i=r;n[i]&&!(o<=i);)++i;if(16<i-r&&n.buffer&&q)return q.decode(n.subarray(r,i));for(var a="";r<i;){var u,s,c=n[r++];128&c?(s=63&n[r++],192==(224&c)?a+=String.fromCharCode((31&c)<<6|s):(u=63&n[r++],(c=224==(240&c)?(15&c)<<12|s<<6|u:(7&c)<<18|s<<12|u<<6|63&n[r++])<65536?a+=String.fromCharCode(c):(s=c-65536,a+=String.fromCharCode(55296|s>>10,56320|1023&s)))):a+=String.fromCharCode(c)}return a}return""}function X(t,e,n,r){if(!(0<r))return 0;for(var o=n,i=n+r-1,a=0;a<t.length;++a){var u=t.charCodeAt(a);if((u=55296<=u&&u<=57343?65536+((1023&u)<<10)|1023&t.charCodeAt(++a):u)<=127){if(i<=n)break;e[n++]=u}else{if(u<=2047){if(i<=n+1)break;e[n++]=192|u>>6}else{if(u<=65535){if(i<=n+2)break;e[n++]=224|u>>12}else{if(i<=n+3)break;e[n++]=240|u>>18,e[n++]=128|u>>12&63}e[n++]=128|u>>6&63}e[n++]=128|63&u}}return e[n]=0,n-o}function Z(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:55296<=r&&r<=57343?(e+=4,++n):e+=3}return e}function K(){var t=u.buffer;y.HEAP8=v=new Int8Array(t),y.HEAP16=l=new Int16Array(t),y.HEAP32=w=new Int32Array(t),y.HEAPU8=f=new Uint8Array(t),y.HEAPU16=p=new Uint16Array(t),y.HEAPU32=d=new Uint32Array(t),y.HEAPF32=V=new Float32Array(t),y.HEAPF64=G=new Float64Array(t)}y.INITIAL_MEMORY;var Q=[],tt=[],et=[];function nt(){if(y.preRun)for("function"==typeof y.preRun&&(y.preRun=[y.preRun]);y.preRun.length;)t=y.preRun.shift(),Q.unshift(t);var t;at(Q)}function rt(){if(y.postRun)for("function"==typeof y.postRun&&(y.postRun=[y.postRun]);y.postRun.length;)t=y.postRun.shift(),et.unshift(t);var t;at(et)}var h=0,m=null;function g(t){y.onAbort&&y.onAbort(t),c(t="Aborted("+t+")"),B=!0,t+=". Build with -sASSERTIONS for more info.";t=new WebAssembly.RuntimeError(t);throw i(t),t}var _;function ot(t){return t.startsWith("data:application/octet-stream;base64,")}function it(t){try{if(t==_&&a)return new Uint8Array(a);if(e)return e(t);throw"both async and sync fetching of the wasm failed"}catch(t){g(t)}}function at(t){for(;0<t.length;)t.shift()(y)}function ut(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){d[this.ptr+4>>2]=t},this.get_type=function(){return d[this.ptr+4>>2]},this.set_destructor=function(t){d[this.ptr+8>>2]=t},this.get_destructor=function(){return d[this.ptr+8>>2]},this.set_refcount=function(t){w[this.ptr>>2]=t},this.set_caught=function(t){v[this.ptr+12>>0]=t=t?1:0},this.get_caught=function(){return 0!=v[this.ptr+12>>0]},this.set_rethrown=function(t){v[this.ptr+13>>0]=t=t?1:0},this.get_rethrown=function(){return 0!=v[this.ptr+13>>0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=w[this.ptr>>2];w[this.ptr>>2]=t+1},this.release_ref=function(){var t=w[this.ptr>>2];return w[this.ptr>>2]=t-1,1===t},this.set_adjusted_ptr=function(t){d[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return d[this.ptr+16>>2]},this.get_exception_ptr=function(){var t;return Te(this.get_type())?d[this.excPtr>>2]:0!==(t=this.get_adjusted_ptr())?t:this.excPtr}}function st(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}y.locateFile?ot(_="MediaInfoModule.wasm")||(_=await locateFile(_)):_=new URL("MediaInfoModule.wasm","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("mediainfo.js",document.baseURI).href).href;var ct=void 0;function b(t){for(var e="",n=t;f[n];)e+=ct[f[n++]];return e}var C={},T={},$={},ft=48,lt=57;function pt(t){var e;return void 0===t?"_unknown":(e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0),ft<=e&&e<=lt?"_"+t:t)}function dt(t,e){return t=pt(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function ht(t,e){var n=dt(e,function(t){this.name=e,this.message=t;t=new Error(t).stack;void 0!==t&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(t.prototype),(n.prototype.constructor=n).prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var P=void 0;function A(t){throw new P(t)}var mt=void 0;function yt(t){throw new mt(t)}function S(r,e,o){function n(t){var e=o(t);e.length!==r.length&&yt("Mismatched type converter count");for(var n=0;n<r.length;++n)F(r[n],e[n])}r.forEach(function(t){$[t]=e});var i=new Array(e.length),a=[],u=0;e.forEach((t,e)=>{T.hasOwnProperty(t)?i[e]=T[t]:(a.push(t),C.hasOwnProperty(t)||(C[t]=[]),C[t].push(()=>{i[e]=T[t],++u===a.length&&n(i)}))}),0===a.length&&n(i)}function F(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||A('type "'+r+'" must have a positive integer typeid pointer'),T.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;A("Cannot register type '"+r+"' twice")}T[t]=e,delete $[t],C.hasOwnProperty(t)&&(n=C[t],delete C[t],n.forEach(t=>t()))}function gt(t){if(!(this instanceof D))return!1;if(!(t instanceof D))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=t.$$.ptrType.registeredClass,o=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;r.baseClass;)o=r.upcast(o),r=r.baseClass;return e===r&&n===o}function vt(t){A(t.$$.ptrType.registeredClass.name+" instance already deleted")}var wt=!1;function _t(t){}function bt(t){--t.count.value,0===t.count.value&&((t=t).smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr))}var Ct={};function Tt(){return Object.keys(j).length}function $t(){var t,e=[];for(t in j)j.hasOwnProperty(t)&&e.push(j[t]);return e}var r=[];function Pt(){for(;r.length;){var t=r.pop();t.$$.deleteScheduled=!1,t.delete()}}var o=void 0;function At(t){o=t,r.length&&o&&o(Pt)}var j={};function St(t,e){return e=function(t,e){for(void 0===e&&A("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),j[e]}function Ft(t,e){return e.ptrType&&e.ptr||yt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&yt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Dt(Object.create(t,{$$:{value:e}}))}function jt(t){var e,n,r=this.getPointee(t);return r?void 0!==(e=St(this.registeredClass,r))?0===e.$$.count.value?(e.$$.ptr=r,e.$$.smartPtr=t,e.clone()):(e=e.clone(),this.destructor(t),e):(e=this.registeredClass.getActualType(r),!(e=Ct[e])||(e=this.isConst?e.constPointerType:e.pointerType,null===(n=function t(e,n,r){return n===r?e:void 0===r.baseClass||null===(e=t(e,n,r.baseClass))?null:r.downcast(e)}(r,this.registeredClass,e.registeredClass)))?o.call(this):this.isSmartPointer?Ft(e.registeredClass.instancePrototype,{ptrType:e,ptr:n,smartPtrType:this,smartPtr:t}):Ft(e.registeredClass.instancePrototype,{ptrType:e,ptr:n})):(this.destructor(t),null);function o(){return this.isSmartPointer?Ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:t}):Ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}}function Dt(t){return"undefined"==typeof FinalizationRegistry?(Dt=t=>t,t):(wt=new FinalizationRegistry(t=>{bt(t.$$)}),_t=t=>wt.unregister(t),(Dt=t=>{var e=t.$$;return!!e.smartPtr&&wt.register(t,{$$:e},t),t})(t))}function Ot(){var t;return this.$$.ptr||vt(this),this.$$.preservePointerOnDelete?(this.$$.count.value+=1,this):((t=Dt(Object.create(Object.getPrototypeOf(this),{$$:{value:{count:(t=this.$$).count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}}))).$$.count.value+=1,t.$$.deleteScheduled=!1,t)}function It(){this.$$.ptr||vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),_t(this),bt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Mt(){return!this.$$.ptr}function Rt(){return this.$$.ptr||vt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&A("Object already scheduled for deletion"),r.push(this),1===r.length&&o&&o(Pt),this.$$.deleteScheduled=!0,this}function D(){}function Et(t,e,n){var r;void 0===t[e].overloadTable&&(r=t[e],t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||A("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[r.argCount]=r)}function Ut(t,e,n,r,o,i,a,u){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=u,this.pureVirtualFunctions=[]}function Wt(t,e,n){for(;e!==n;)e.upcast||A("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function kt(t,e){if(null===e)return this.isReference&&A("null is not a valid "+this.name),0;e.$$||A('Cannot pass "'+re(e)+'" as a '+this.name),e.$$.ptr||A("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return Wt(e.$$.ptr,n,this.registeredClass)}function xt(t,e){if(null===e)return this.isReference&&A("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;e.$$||A('Cannot pass "'+re(e)+'" as a '+this.name),e.$$.ptr||A("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&A("Cannot convert argument of type "+(e.$$.smartPtrType||e.$$.ptrType).name+" to parameter type "+this.name);var n,r,o=e.$$.ptrType.registeredClass;if(r=Wt(e.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&A("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:A("Cannot convert argument of type "+(e.$$.smartPtrType||e.$$.ptrType).name+" to parameter type "+this.name);break;case 1:r=e.$$.smartPtr;break;case 2:e.$$.smartPtrType===this?r=e.$$.smartPtr:(n=e.clone(),r=this.rawShare(r,ne.toHandle(function(){n.delete()})),null!==t&&t.push(this.rawDestructor,r));break;default:A("Unsupporting sharing policy")}return r}function Ht(t,e){if(null===e)return this.isReference&&A("null is not a valid "+this.name),0;e.$$||A('Cannot pass "'+re(e)+'" as a '+this.name),e.$$.ptr||A("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&A("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return Wt(e.$$.ptr,n,this.registeredClass)}function zt(t){return this.fromWireType(w[t>>2])}function Lt(t){return t=this.rawGetPointee?this.rawGetPointee(t):t}function Yt(t){this.rawDestructor&&this.rawDestructor(t)}function Bt(t){null!==t&&t.delete()}function O(t,e,n,r,o,i,a,u,s,c,f){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=u,this.rawConstructor=s,this.rawShare=c,this.rawDestructor=f,o||void 0!==e.baseClass?this.toWireType=xt:(this.toWireType=r?kt:Ht,this.destructorFunction=null)}function Vt(t){return N.get(t)}function Gt(t,e,n){var r,o;return t.includes("j")?(r=e,o=n,t=y["dynCall_"+(t=t)],o&&o.length?t.apply(null,[r].concat(o)):t.call(null,r)):Vt(e).apply(null,n)}function I(t,e){var n,r,o,i=(t=b(t)).includes("j")?(n=t,r=e,o=[],function(){return o.length=0,Object.assign(o,arguments),Gt(n,r,o)}):Vt(e);return"function"!=typeof i&&A("unknown function pointer with signature "+t+": "+e),i}var Nt=void 0;function qt(t){var t=Ce(t),e=b(t);return E(t),e}function Jt(t,e){var n=[],r={};throw e.forEach(function t(e){r[e]||T[e]||($[e]?$[e].forEach(t):(n.push(e),r[e]=!0))}),new Nt(t+": "+n.map(qt).join([", "]))}function Xt(t,e){for(var n=[],r=0;r<t;r++)n.push(d[e+4*r>>2]);return n}function Zt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function Kt(t,e,n,r,o){for(var i=e.length,n=(i<2&&A("argTypes array size mismatch! Must at least get return value and 'this' types!"),null!==e[1]&&null!==n),a=!1,u=1;u<e.length;++u)if(null!==e[u]&&void 0===e[u].destructorFunction){a=!0;break}for(var s="void"!==e[0].name,c="",f="",u=0;u<i-2;++u)c+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var l="return function "+pt(t)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n",p=(a&&(l+="var destructors = [];\n"),a?"destructors":"null"),d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[A,r,o,Zt,e[0],e[1]];n&&(l+="var thisWired = classParam.toWireType("+p+", this);\n");for(u=0;u<i-2;++u)l+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+e[u+2].name+"\n",d.push("argType"+u),h.push(e[u+2]);if(l+=(s?"var rv = ":"")+"invoker(fn"+(0<(f=n?"thisWired"+(0<f.length?", ":"")+f:f).length?", ":"")+f+");\n",a)l+="runDestructors(destructors);\n";else for(u=n?1:2;u<e.length;++u){var m=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==e[u].destructorFunction&&(l+=m+"_dtor("+m+"); // "+e[u].name+"\n",d.push(m+"_dtor"),h.push(e[u].destructorFunction))}return s&&(l+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d.push(l+="}\n"),function(t,e){var n;if(t instanceof Function)return(n=dt(t.name||"unknownFunctionName",function(){})).prototype=t.prototype,n=new n,(e=t.apply(n,e))instanceof Object?e:n;throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function")}(Function,d).apply(null,h)}var Qt=[],M=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function te(){for(var t=0,e=5;e<M.length;++e)void 0!==M[e]&&++t;return t}function ee(){for(var t=5;t<M.length;++t)if(void 0!==M[t])return M[t];return null}var ne={toValue:t=>(t||A("Cannot use deleted val. handle = "+t),M[t].value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=Qt.length?Qt.pop():M.length;return M[e]={refcount:1,value:t},e}}};function re(t){var e;return null===t?"null":"object"==(e=typeof t)||"array"==e||"function"==e?t.toString():""+t}var oe="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function ie(t,e){for(var n,r=t>>1,o=r+e/2;!(o<=r)&&p[r];)++r;if(32<(n=r<<1)-t&&oe)return oe.decode(f.subarray(t,n));for(var i="",a=0;!(e/2<=a);++a){var u=l[t+2*a>>1];if(0==u)break;i+=String.fromCharCode(u)}return i}function ae(t,e,n){if((n=void 0===n?2147483647:n)<2)return 0;for(var r=e,o=(n-=2)<2*t.length?n/2:t.length,i=0;i<o;++i){var a=t.charCodeAt(i);l[e>>1]=a,e+=2}return l[e>>1]=0,e-r}function ue(t){return 2*t.length}function se(t,e){for(var n=0,r="";!(e/4<=n);){var o,i=w[t+4*n>>2];if(0==i)break;++n,65536<=i?(o=i-65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o)):r+=String.fromCharCode(i)}return r}function ce(t,e,n){if((n=void 0===n?2147483647:n)<4)return 0;for(var r=e,o=r+n-4,i=0;i<t.length;++i){var a=t.charCodeAt(i);if(55296<=a&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++i)),w[e>>2]=a,o<(e+=4)+4)break}return w[e>>2]=0,e-r}function fe(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&r<=57343&&++n,e+=4}return e}function le(t){var e=Z(t)+1,n=be(e);return n&&X(t,v,n,e),n}var pe={};function R(){if(!R.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:z||"./this.program"};for(e in pe)void 0===pe[e]?delete t[e]:t[e]=pe[e];var e,n=[];for(e in t)n.push(e+"="+t[e]);R.strings=n}return R.strings}function de(t){return t%4==0&&(t%100!=0||t%400==0)}var he=[31,29,31,30,31,30,31,31,30,31,30,31],me=[31,28,31,30,31,30,31,31,30,31,30,31];function ye(t,e,n,r){var o=w[r+40>>2],i={tm_sec:w[r>>2],tm_min:w[r+4>>2],tm_hour:w[r+8>>2],tm_mday:w[r+12>>2],tm_mon:w[r+16>>2],tm_year:w[r+20>>2],tm_wday:w[r+24>>2],tm_yday:w[r+28>>2],tm_isdst:w[r+32>>2],tm_gmtoff:w[r+36>>2],tm_zone:o?J(o):""},a=J(n),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(m in u)a=a.replace(new RegExp(m,"g"),u[m]);var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(t,e,n){for(var r="number"==typeof t?t.toString():t||"";r.length<e;)r=n[0]+r;return r}function l(t,e){return f(t,e,"0")}function p(t,e){function n(t){return t<0?-1:0<t?1:0}var r;return r=0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))?n(t.getDate()-e.getDate()):r}function d(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function h(t){var t=function(t,e){for(var n=new Date(t.getTime());0<e;){var r=de(n.getFullYear()),o=n.getMonth(),r=(r?he:me)[o];if(!(e>r-n.getDate()))return n.setDate(n.getDate()+e),n;e-=r-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(t.tm_year+1900,0,1),t.tm_yday),e=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),e=d(e),n=d(n);return p(e,t)<=0?p(n,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var m,y={"%a":function(t){return s[t.tm_wday].substring(0,3)},"%A":function(t){return s[t.tm_wday]},"%b":function(t){return c[t.tm_mon].substring(0,3)},"%B":function(t){return c[t.tm_mon]},"%C":function(t){return l((t.tm_year+1900)/100|0,2)},"%d":function(t){return l(t.tm_mday,2)},"%e":function(t){return f(t.tm_mday,2," ")},"%g":function(t){return h(t).toString().substring(2)},"%G":h,"%H":function(t){return l(t.tm_hour,2)},"%I":function(t){t=t.tm_hour;return 0==t?t=12:12<t&&(t-=12),l(t,2)},"%j":function(t){return l(t.tm_mday+function(t,e){for(var n=0,r=0;r<=e;n+=t[r++]);return n}(de(t.tm_year+1900)?he:me,t.tm_mon-1),3)},"%m":function(t){return l(t.tm_mon+1,2)},"%M":function(t){return l(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.tm_hour&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return l(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){t=t.tm_yday+7-t.tm_wday;return l(Math.floor(t/7),2)},"%V":function(t){var e,n=Math.floor((t.tm_yday+7-(t.tm_wday+6)%7)/7);return(t.tm_wday+371-t.tm_yday-2)%7<=2&&n++,n?53!=n||4==(e=(t.tm_wday+371-t.tm_yday)%7)||3==e&&de(t.tm_year)||(n=1):(n=52,(4==(e=(t.tm_wday+7-t.tm_yday-1)%7)||5==e&&de(t.tm_year%400-1))&&n++),l(n,2)},"%w":function(t){return t.tm_wday},"%W":function(t){t=t.tm_yday+7-(t.tm_wday+6)%7;return l(Math.floor(t/7),2)},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=0<=(t=t.tm_gmtoff),t=Math.abs(t)/60;return(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}},a=a.replace(/%%/g,"\0\0");for(m in y)a.includes(m)&&(a=a.replace(new RegExp(m,"g"),y[m](i)));a=a.replace(/\0\0/g,"%");r=a,o=!1,g=0<g?g:Z(r)+1,g=new Array(g),r=X(r,g,0,g.length),o&&(g.length=r);var g,n=g;return n.length>e?0:(v.set(n,t),n.length-1)}for(var ge=new Array(256),ve=0;ve<256;++ve)ge[ve]=String.fromCharCode(ve);ct=ge,P=y.BindingError=ht(Error,"BindingError"),mt=y.InternalError=ht(Error,"InternalError"),D.prototype.isAliasOf=gt,D.prototype.clone=Ot,D.prototype.delete=It,D.prototype.isDeleted=Mt,D.prototype.deleteLater=Rt,y.getInheritedInstanceCount=Tt,y.getLiveInheritedInstances=$t,y.flushPendingDeletes=Pt,y.setDelayFunction=At,O.prototype.getPointee=Lt,O.prototype.destructor=Yt,O.prototype.argPackAdvance=8,O.prototype.readValueFromPointer=zt,O.prototype.deleteObject=Bt,O.prototype.fromWireType=jt,Nt=y.UnboundTypeError=ht(Error,"UnboundTypeError"),y.count_emval_handles=te,y.get_first_emval=ee;var we,_e={e:function(t,e,n){throw new ut(t).init(e,n),t},k:function(t,e,n,r,o){},i:function(t,n,r,o,i){var a=st(r);F(t,{name:n=b(n),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?o:i},argPackAdvance:8,readValueFromPointer:function(t){var e;if(1===r)e=v;else if(2===r)e=l;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+n);e=w}return this.fromWireType(e[t>>a])},destructorFunction:null})},u:function(s,t,e,c,n,f,r,l,o,p,d,i,h){d=b(d),f=I(n,f),l=l&&I(r,l),p=p&&I(o,p),h=I(i,h);var a,m=pt(d);n=m,r=function(){Jt("Cannot construct "+d+" due to unbound types",[c])},y.hasOwnProperty(n)?((void 0===a||void 0!==y[n].overloadTable&&void 0!==y[n].overloadTable[a])&&A("Cannot register public name '"+n+"' twice"),Et(y,n,n),y.hasOwnProperty(a)&&A("Cannot register multiple overloads of a function with the same number of arguments ("+a+")!"),y[n].overloadTable[a]=r):(y[n]=r,void 0!==a&&(y[n].numArguments=a)),S([s,t,e],c?[c]:[],function(t){t=t[0],t=c?(a=t.registeredClass).instancePrototype:D.prototype;var e,n,r=dt(m,function(){if(Object.getPrototypeOf(this)!==o)throw new P("Use 'new' to construct "+d);if(void 0===i.constructor_body)throw new P(d+" has no accessible constructor");var t=i.constructor_body[arguments.length];if(void 0===t)throw new P("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(i.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)}),o=Object.create(t,{constructor:{value:r}}),i=(r.prototype=o,new Ut(d,r,o,h,a,f,l,p)),t=new O(d,i,!0,!1,!1),a=new O(d+"*",i,!1,!1,!1),u=new O(d+" const*",i,!1,!0,!1);return Ct[s]={pointerType:a,constPointerType:u},e=m,r=r,y.hasOwnProperty(e)||yt("Replacing nonexistant public symbol"),void 0!==y[e].overloadTable&&void 0!==n?y[e].overloadTable[n]=r:(y[e]=r,y[e].argCount=n),[t,a,u]})},t:function(t,r,e,n,o,i){0<r||g(a);var a,u=Xt(r,e);o=I(n,o),S([],[t],function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[r-1])throw new P("Cannot register multiple constructors with identical number of parameters ("+(r-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[r-1]=()=>{Jt("Cannot construct "+e.name+" due to unbound types",u)},S([],u,function(t){return t.splice(1,0,null),e.registeredClass.constructor_body[r-1]=Kt(n,t,null,o,i),[]}),[]})},c:function(t,i,a,e,n,u,s,c){var f=Xt(a,e);i=b(i),u=I(n,u),S([],[t],function(e){var n=(e=e[0]).name+"."+i;function t(){Jt("Cannot call "+n+" due to unbound types",f)}i.startsWith("@@")&&(i=Symbol[i.substring(2)]),c&&e.registeredClass.pureVirtualFunctions.push(i);var r=e.registeredClass.instancePrototype,o=r[i];return void 0===o||void 0===o.overloadTable&&o.className!==e.name&&o.argCount===a-2?(t.argCount=a-2,t.className=e.name,r[i]=t):(Et(r,i,n),r[i].overloadTable[a-2]=t),S([],f,function(t){t=Kt(n,t,e,u,s);return void 0===r[i].overloadTable?(t.argCount=a-2,r[i]=t):r[i].overloadTable[a-2]=t,[]}),[]})},s:function(t,e){F(t,{name:e=b(e),fromWireType:function(t){var e=ne.toValue(t);return 4<(t=t)&&0==--M[t].refcount&&(M[t]=void 0,Qt.push(t)),e},toWireType:function(t,e){return ne.toHandle(e)},argPackAdvance:8,readValueFromPointer:zt,destructorFunction:null})},g:function(t,e,n){n=st(n),F(t,{name:e=b(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:function(t,e){switch(e){case 2:return function(t){return this.fromWireType(V[t>>2])};case 3:return function(t){return this.fromWireType(G[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}(e,n),destructorFunction:null})},b:function(t,e,n,r,o){e=b(e);var i,a=st(n),u=t=>t,n=(0===r&&(i=32-8*n,u=t=>t<<i>>>i),e.includes("unsigned"));F(t,{name:e,fromWireType:u,toWireType:n=n?function(t,e){return this.name,e>>>0}:function(t,e){return this.name,e},argPackAdvance:8,readValueFromPointer:function(t,e,n){switch(e){case 0:return n?function(t){return v[t]}:function(t){return f[t]};case 1:return n?function(t){return l[t>>1]}:function(t){return p[t>>1]};case 2:return n?function(t){return w[t>>2]}:function(t){return d[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}(e,a,0!==r),destructorFunction:null})},a:function(t,e,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(t){var e=d,n=e[t>>=2],t=e[t+1];return new r(e.buffer,t,n)}F(t,{name:n=b(n),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},f:function(t,e){var c="std::string"===(e=b(e));F(t,{name:e,fromWireType:function(t){var e=d[t>>2],n=t+4;if(c)for(var r=n,o=0;o<=e;++o){var i,a,u=n+o;o!=e&&0!=f[u]||(i=J(r,u-r),a=void 0===a?i:a+String.fromCharCode(0)+i,r=u+1)}else{for(var s=new Array(e),o=0;o<e;++o)s[o]=String.fromCharCode(f[n+o]);a=s.join("")}return E(t),a},toWireType:function(t,e){var n,r="string"==typeof(e=e instanceof ArrayBuffer?new Uint8Array(e):e),o=(r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||A("Cannot pass non-string to std::string"),n=c&&r?Z(e):e.length,be(4+n+1)),i=o+4;if(d[o>>2]=n,c&&r)X(e,f,i,n+1);else if(r)for(var a=0;a<n;++a){var u=e.charCodeAt(a);255<u&&(E(i),A("String has UTF-16 code units that do not fit in 8 bits")),f[i+a]=u}else for(a=0;a<n;++a)f[i+a]=e[a];return null!==t&&t.push(E,o),o},argPackAdvance:8,readValueFromPointer:zt,destructorFunction:function(t){E(t)}})},d:function(t,s,o){var c,i,f,a,l;o=b(o),2===s?(c=ie,i=ae,a=ue,f=()=>p,l=1):4===s&&(c=se,i=ce,a=fe,f=()=>d,l=2),F(t,{name:o,fromWireType:function(t){for(var e=d[t>>2],n=f(),r=t+4,o=0;o<=e;++o){var i,a,u=t+4+o*s;o!=e&&0!=n[u>>l]||(i=c(r,u-r),a=void 0===a?i:a+String.fromCharCode(0)+i,r=u+s)}return E(t),a},toWireType:function(t,e){"string"!=typeof e&&A("Cannot pass non-string to C++ string type "+o);var n=a(e),r=be(4+n+s);return d[r>>2]=n>>l,i(e,r+4,n+s),null!==t&&t.push(E,r),r},argPackAdvance:8,readValueFromPointer:zt,destructorFunction:function(t){E(t)}})},j:function(t,e){F(t,{isVoid:!0,name:e=b(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},q:function(t,e){var t=new Date(1e3*(d[t>>2]+4294967296*w[t+4>>2])),n=(w[e>>2]=t.getUTCSeconds(),w[e+4>>2]=t.getUTCMinutes(),w[e+8>>2]=t.getUTCHours(),w[e+12>>2]=t.getUTCDate(),w[e+16>>2]=t.getUTCMonth(),w[e+20>>2]=t.getUTCFullYear()-1900,w[e+24>>2]=t.getUTCDay(),Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0)),t=(t.getTime()-n)/864e5|0;w[e+28>>2]=t},r:function(t,e,n){var r=(new Date).getFullYear(),o=new Date(r,0,1),r=new Date(r,6,1),i=o.getTimezoneOffset(),a=r.getTimezoneOffset(),u=Math.max(i,a);function s(t){t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}d[t>>2]=60*u,w[e>>2]=Number(i!=a),t=s(o),u=s(r),e=le(t),o=le(u),a<i?(d[n>>2]=e,d[n+4>>2]=o):(d[n>>2]=o,d[n+4>>2]=e)},h:function(){g("")},p:function(){return Date.now()},o:function(t){var e=f.length,n=(t>>>=0,2147483648);if(!(n<t))for(var r,o=1;o<=4;o*=2){var i=e*(1+.2/o),i=Math.min(i,t+100663296);if(function(t){var e=u.buffer;try{return u.grow(t-e.byteLength+65535>>>16),K(),1}catch(t){}}(Math.min(n,(i=Math.max(t,i))+((r=65536)-i%r)%r)))return!0}return!1},m:function(a,u){var s=0;return R().forEach(function(t,e){for(var n=u+s,r=(d[a+4*e>>2]=n,t),o=n,e=void 0,i=0;i<r.length;++i)v[o++>>0]=r.charCodeAt(i);e||(v[o>>0]=0),s+=t.length+1}),0},n:function(t,e){var n=R(),r=(d[t>>2]=n.length,0);return n.forEach(function(t){r+=t.length+1}),d[e>>2]=r,0},l:ye},be=(!function(){var e={a:_e};function n(t,e){var t=t.exports;y.asm=t,u=y.asm.v,K(),N=y.asm.y,t=y.asm.w,tt.unshift(t),h--,y.monitorRunDependencies&&y.monitorRunDependencies(h),0==h&&m&&(t=m,m=null,t())}function r(t){n(t.instance)}function o(t){return(a||!L&&!s||"function"!=typeof fetch?Promise.resolve().then(function(){return it(_)}):fetch(_,{credentials:"same-origin"}).then(function(t){if(t.ok)return t.arrayBuffer();throw"failed to load wasm binary file at '"+_+"'"}).catch(function(){return it(_)})).then(function(t){return WebAssembly.instantiate(t,e)}).then(function(t){return t}).then(t,function(t){c("failed to asynchronously prepare wasm: "+t),g(t)})}if(h++,y.monitorRunDependencies&&y.monitorRunDependencies(h),y.instantiateWasm)try{y.instantiateWasm(e,n);return}catch(t){c("Module.instantiateWasm callback failed with error: "+t),i(t)}(a||"function"!=typeof WebAssembly.instantiateStreaming||ot(_)||Y||"function"!=typeof fetch?o(r):fetch(_,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(r,function(t){return c("wasm streaming compile failed: "+t),c("falling back to ArrayBuffer instantiation"),o(r)})})).catch(i)}(),y.___wasm_call_ctors=function(){return(y.___wasm_call_ctors=y.asm.w).apply(null,arguments)},y._malloc=function(){return(be=y._malloc=y.asm.x).apply(null,arguments)}),E=y._free=function(){return(E=y._free=y.asm.z).apply(null,arguments)},Ce=y.___getTypeName=function(){return(Ce=y.___getTypeName=y.asm.A).apply(null,arguments)},Te=(y.__embind_initialize_bindings=function(){return(y.__embind_initialize_bindings=y.asm.B).apply(null,arguments)},y.___cxa_is_pointer_type=function(){return(Te=y.___cxa_is_pointer_type=y.asm.C).apply(null,arguments)});function $e(){function t(){we||(we=!0,y.calledRun=!0,B)||(at(tt),W(y),y.onRuntimeInitialized&&y.onRuntimeInitialized(),rt())}0<h||(nt(),0<h)||(y.setStatus?(y.setStatus("Running..."),setTimeout(function(){setTimeout(function(){y.setStatus("")},1),t()},1)):t())}if(y.dynCall_iiijj=function(){return(y.dynCall_iiijj=y.asm.D).apply(null,arguments)},y.dynCall_viijii=function(){return(y.dynCall_viijii=y.asm.E).apply(null,arguments)},y.dynCall_iiiiij=function(){return(y.dynCall_iiiiij=y.asm.F).apply(null,arguments)},y.dynCall_iiiiijj=function(){return(y.dynCall_iiiiijj=y.asm.G).apply(null,arguments)},y.dynCall_iiiiiijj=function(){return(y.dynCall_iiiiiijj=y.asm.H).apply(null,arguments)},m=function t(){we||$e(),we||(m=t)},y.preInit)for("function"==typeof y.preInit&&(y.preInit=[y.preInit]);0<y.preInit.length;)y.preInit.pop()();return $e(),y.ready}),f={coverData:!1,chunkSize:262144,format:"object",full:!1},c=(t.prototype.analyzeData=function(t,a,u){var s=this,c=0;if(void 0===u)return new Promise(function(n,r){return s.analyzeData(t,a,function(t,e){return e?r(e):n(t)})});function e(o){function i(){function t(t){!function(t){if(t.length===0||s.openBufferContinue(t,t.length))return false;var e=s.openBufferContinueGotoGet();if(e===-1)c+=t.length;else{c=e;s.openBufferInit(o,e)}return true}(t)?(s.openBufferFinalize(),t=s.inform(),u("object"===s.options.format?JSON.parse(t):t)):i()}var e;try{var n=Math.min(null!=(e=s.options.chunkSize)?e:f.chunkSize,o-c),r=a(n,c)}catch(t){if(t instanceof Error)return u("",t);if("string"==typeof t)return u("",new Error(t))}r instanceof Promise?r.then(t).catch(function(t){return u("",t)}):void 0!==r&&t(r)}s.openBufferInit(o,c),i()}var n=t();n instanceof Promise?n.then(e):e(n)},t.prototype.close=function(){this.wasmInstance.close()},t.prototype.inform=function(){return this.wasmInstance.inform()},t.prototype.openBufferContinue=function(t,e){return!!(8&this.wasmInstance.open_buffer_continue(t,e))},t.prototype.openBufferContinueGotoGet=function(){var t=this.wasmInstance.open_buffer_continue_goto_get_lower(),e=this.wasmInstance.open_buffer_continue_goto_get_upper();return-1==t&&-1==e?-1:t<0?t+4294967296+4294967296*e:t+4294967296*e},t.prototype.openBufferFinalize=function(){this.wasmInstance.open_buffer_finalize()},t.prototype.openBufferInit=function(t,e){this.wasmInstance.open_buffer_init(t,e)},t);function t(t,e){this.wasmInstance=t,this.options=e}return function n(r,o,e){if(void 0===r&&(r={}),void 0===o)return new Promise(function(t,e){return n(r,t,e)});var i=u(u({},f),r),t={};t.print=a,t.printErr=a,t.onAbort=function(t){e&&e(t)},i.locateFile&&(t.locateFile=i.locateFile,delete i.locateFile),s(t).then(function(t){var e="object"===i.format?"JSON":i.format,t=new t.MediaInfo(null!=e?e:f.format,null!=(t=i.coverData)?t:f.coverData,null!=(e=i.full)?e:f.full);o(new c(t,i))}).catch(function(t){e&&e(t)})}});const wasm_ver="0.1";var wasm_url;locateFile=async()=>{if(void 0===wasm_url){var t=localforage.createInstance({name:"bbcodejs"}),e=await t.getItem("MediaInfoModule.wasm.ver");if(null!==e&&e===wasm_ver){var e=await t.getItem("MediaInfoModule.wasm");if(null!==e)try{return wasm_url=URL.createObjectURL(e)}catch(t){console.error("从本地缓存生成 wasm url 发生错误，转为在线获取。 ",t)}}e=new Headers,e=(e.append("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36"),await fetch("https://userscript.kysdm.com/wasm/MediaInfoModule.wasm",{headers:e}));if(!e.ok)throw new Error("Failed to fetch MediaInfoModule.wasm file, status code: "+e.status);e=await e.blob(),wasm_url=URL.createObjectURL(e),await t.setItem("MediaInfoModule.wasm",e),await t.setItem("MediaInfoModule.wasm.ver",wasm_ver)}return wasm_url};